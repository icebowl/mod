/**
 * Copyright (c) 2011, 2018, Oracle and/or its affiliates.  All rights reserved.
 */
 

!function(){try{!function(d,f){window.getVPAIDAd=function(){if(T.ad)return T.ad;var e=function(){T.Util=n(),T.Queue=l(),T.VpaidAd=o(),T.MoatTag=s(),r(),a();var e=T.Util.parseQS(T.PARTNER_CODE);if(e){T.qs=e;var t={};for(var i in e)t[i]=e[i];return t.wrapperType="js",new T.MoatTag(T.qs.pcode,t),new T.VpaidAd}}();return T.ad=e};var T={ad:null,version:"2.0",PARTNER_CODE:"turnvpaid34569",startTime:(new d).getTime(),playerProvidedEventCallbacks:{},VPAIDevents:{AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdSizeChange:"AdSizeChange",AdLinearChange:"AdLinearChange",AdDurationChange:"AdDurationChange",AdExpandedChange:"AdExpandedChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdLog:"AdLog",AdError:"AdError",AdProgress:"AdProgress"},VPAIDmethods:{resizeAd:"resizeAd",startAd:"startAd",stopAd:"stopAd",pauseAd:"pauseAd",resumeAd:"resumeAd",expandAd:"expandAd",collapseAd:"collapseAd",skipAd:"skipAd"}},n=function(){var s={safeCallbacks:{},findMoatScript:function(e){for(var t=new RegExp(e+"/moatwrapper"),i=document.getElementsByTagName("script"),n=i.length-1;0<=n;n--){var a=i[n];if(t.test(a.src))return a}},parseQS:function(e){var t={},i=s.findMoatScript(e);if(!i)return!1;for(var n=i.src.split("#")[1].split("&"),a=n.length-1;0<=a;a--){var r=n[a].split("=");t[r[0]]=decodeURIComponent(r.slice(1).join("="))}return t.vast&&(t.vast=s.expandCachebuster(t.vast)),t},getScrUrls:function(){var e,t=T&&T.qs,i=[],n=new RegExp(/^scr\d{1,}/);if(!t)return i;for(key in t)0===key.search(n)&&"string"==typeof(e=t[key])&&i.push(e);return i},getParentNode:function(e){return e.parentNode||e.parentElement||!1},getElementNodeTree:function(e){if(!e)return!1;for(var t="number"==typeof cap?cap:50,i=[e],n=!1,a=0;a<t&&((n=s.getParentNode(e))&&1===n);a++)e=n,i.push(e)},getSafeNode:function(e){if(!e)return!1;if("OBJECT"!==e.nodeName&&"EMBED"!==e.nodeName)return e;for(var t=s.getElementNodeTree(e),i=!1,n=0;n<t.length;n++)if(el&&"OBJECT"!==el.nodeName&&"EMBED"!==el.nodeName){i=el;break}return i},hasChildNodes:function(e){return e&&e.childNodes&&0<e.childNodes.length},addTagSafely:function(e,t){if(!e||!t)return!1;var i=s.getSafeNode(t);if(!i)return!1;if(s.hasChildNodes(i)){var n=i.childNodes[f.max(0,i.childNodes.length-1)]||null;i.insertBefore(e,n)}else i.appendChild(e);return i},addScriptToDOM:function(e,t,i){if("string"!=typeof e||!t||!document)return!1;var n=i||document.createElement("script");n.type="text/javascript";var a=s.addTagSafely(n,t);return!!a&&(n.src=e,a)},expandCachebuster:function(e){return e.replace("[MOAT_CB]",""+(new d).getTime())},createXMLcompanionNode:function(e){if(!e||0===e.length)return"";for(var t,i,n,a,r,s,o,d,l=document.implementation.createDocument(null,"CompanionAds",null),u=e.length-1;0<=u;u--){if(t=e[u],(i=l.createElementNS("","Companion")).setAttributeNS("","width",t.width),i.setAttributeNS("","height",t.height),(n=l.createElementNS("","StaticResource")).setAttributeNS("","type",t.type),n.appendChild(l.createCDATASection(t.staticResource)),i.appendChild(n),t.companionClickThroughURLTemplate&&((a=l.createElementNS("","CompanionClickThrough")).appendChild(l.createCDATASection(t.companionClickThroughURLTemplate)),i.appendChild(a)),t.trackingEvents&&t.trackingEvents.creativeView){r=l.createElementNS("","TrackingEvents");for(var p=(s=t.trackingEvents.creativeView).length-1;0<=p;p--)o=s[p],(d=l.createElementNS("","Tracking")).setAttributeNS("","event","creativeView"),d.appendChild(l.createCDATASection(o)),r.appendChild(d);i.appendChild(r)}l.documentElement.appendChild(i)}return(new XMLSerializer).serializeToString(l)},emptyObj:{},isArray:function(e){try{return"[object Array]"===s.emptyObj.toString.call(e)}catch(e){return!1}},isFunction:function(e){try{return"[object Function]"===s.emptyObj.toString.call(e)}catch(e){return!1}},isNumber:function(e){try{return"[object Number]"===s.emptyObj.toString.call(e)}catch(e){return!1}},timeouts:[],loops:{},makeSafe:function(e,r,s){var o=!1;return function(){try{return r?s?e.apply(s,arguments):e.apply(this,arguments):e.apply(null,arguments)}catch(e){if(!o){o=!0;var t,i,n=e.name+" in makeSafe: "+e.message+", stack="+e.stack;try{t=T.qs.level1+"%3A"+T.qs.level2+"%3A"+T.qs.level3+"%3A"+T.qs.level4}catch(e){t="data%3Adata%3Adata%3Adata"}try{i=T.qs.vast}catch(e){i="-"}var a="//pixel.moatads.com/pixel.gif?e=24&d="+t+"&i="+encodeURIComponent("TURNVPAID1")+"&ac=1&k="+encodeURIComponent(n)+"&ar="+encodeURIComponent("62c9e24-clean")+"&j="+encodeURIComponent(document.referrer)+"&zMoatVast="+i+"&cs="+(new d).getTime();(new Image).src=a,T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["AdError"]})}}}},setSafeTimeout:function(e,t){var i;return e=s.makeSafe(e),window&&window.setTimeout&&(i=window.setTimeout(e,t),s.timeouts.push(i)),i},setSafeLoop:function(e,t,i){if(s.isFunction(e)&&s.isArray(t)&&s.isNumber(i)){var n=(new d).getTime()+"";s.loops[n]&&window.clearTimeout(s.loops[n].tid),s.loops[n]={},s.loops[n].callback=s.makeSafe(e,t),s.loops[n].interval=i,s.loops[n].tid=s.setSafeTimeout(s.runLoop(n),i),n=i=t=e=null}},runLoop:function(t){return function(){if(!s.loops||!s.loops[t])return!1;var e=s.loops[t].callback.call(null);if("boolean"==typeof e&&!1===e)return window.clearTimeout(s.loops[t].tid),s.loops[t]=!1;s.loops[t].tid=s.setSafeTimeout(s.runLoop(t),s.loops[t].interval),t=e=null}},objectToQueryString:function(e,t){var i="";for(var n in e)e.hasOwnProperty(n)&&(i+="&"+n+"="+e[n]);if(t)i=encodeURI(i);return i.slice(1)},addListener:function(e,t,i,n){var a,r=this.makeSafe(i);if(a=e.addEventListener?{name:"addEventListener",evtPrefix:""}:{name:"attachEvent",evtPrefix:"on"},e&&a.name&&e[a.name])try{e[a.name](a.evtPrefix+t,r,!1)}catch(e){}!1!==n&&(s.safeCallbacks[t+n]=r)},removeListener:function(e,t,i,n){var a,r=t+n;if(!e)return delete s.safeCallbacks[r],!1;try{e.removeEventListener;e.detachEvent}catch(e){return delete s.safeCallbacks[r],!1}i=!1!==n?s.safeCallbacks[r]:i,a=e.removeEventListener?{name:"removeEventListener",evtPrefix:""}:{name:"detachEvent",evtPrefix:"on"};try{e[a.name](a.evtPrefix+t,i,!1)}catch(e){}delete s.safeCallbacks[r]},getDocAndWinOfEl:function(e){var t,i;try{i=(t=e.ownerDocument)&&(t.defaultView||t.parentWindow)}catch(e){}return{elDoc:t,elWin:i}}};return s},b=function(){var e=function(){this.availableResources=["StaticResource","IFrameResource","HTMLResource"],this.availableTypesMap={"image/gif":"img","image/jpeg":"img","image/png":"img","application/x-javascript":"js","application/x-shockwave-flash":"swf"},this.availableTypes=["swf","img"]};return e.prototype.loadCompanion=function(a,r,s,o,d,e,l,u){var h=this;function p(e,t,i,n,a,r,s,o){o=o||[];for(var d="",l=0;l<o.length;l++)d+='<img src="'+o[l]+'" style="display:none" width="1" height="1">';if("StaticResource"===a){if("img"==r){var u='<img src="'+t+'" width="'+i+'" height="'+n+'">';d+=s?'<a href="'+s+'" target="_blank">'+u+"</a>":u}if("swf"==r){var p=f.floor(1e7*f.random());d+='<object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/sho ckwave/cabs/flash/swflash.cab#version=8,0,0,0" width="'+i+'" height="'+n+'" id="companion'+(p-1)+'"><param name="allowScriptAccess" value="always" /><param name= "movie" value="'+t+'" />'+(s?'<param name="FlashVars" value="clickTag='+encodeURIComponent(s)+'" />':"")+'<param name="wmode" value="opaque" /><embed type="application/x-shockwave-flash" src="'+t+'" '+(s?'flashvars="clickTag='+encodeURIComponent(s)+'" ':"")+'wmode="opaque" width="'+i+'" height="'+n+'" id="companion'+p+'"name="companion'+p+'"allowscriptaccess="always" /></object>'}}return"IFrameResource"===a&&(d+="<iframe style='border:0px; padding:0px; margin:0px;' width='"+i+"' height='"+n+"' frameborder='no' scrolling='no' marginheight='0' marginwidth='0' src='"+t+"'></iframe>"),"HTMLResource"===a&&(d+=t,e&&(i&&(e.style.width=i+"px"),n&&(e.style.height=n+"px"))),d}r=h.availableTypesMap[r];var c=!1;function t(){if(c)return!0;try{var e=r,t=function(e,t,n,a){var i,l="moatCompanionDiv_"+e+"x"+t;function r(e){var t=[],i=e.getElementById(l);i&&t.push(i);for(var n=0,a=h.availableResources.length;n<a;n++){var r;if("StaticResource"==h.availableResources[n])for(var s=0,o=h.availableTypes.length;s<o;s++){var d=e.getElementById(l+"_"+h.availableResources[n]+"_"+h.availableTypes[s]);d&&t.push(d)}else r=e.getElementById(l+"_"+h.availableResources[n]);r&&t.push(r)}return 0<t.length&&t}function s(e){if(!e||0==e.length)return!1;if(1==e.length)return e[0];for(var t=0,i=e.length;t<i;t++)if(a){if(e[t].id===l+"_"+n+"_"+a)return e[t]}else if(e[t].id===l+"_"+n)return e[t];return!1}try{i=s(r(document))||s(r(window.top.document))}catch(e){}if(i)return i;var o=[];try{for(var d=window.frames,u=0,p=d.length;u<p;u++){try{var c=r(d[u].document)}catch(e){}c&&(o=o.concat(c))}}catch(e){}return(i=s(o))||!1}(s,o,a,e);if(!t)return!1;if("DIV"!==t.nodeName){var i=t;i.id="";var n=T.Util.getParentNode(i);if(!n)return!1;t=document.createElement("div"),T.Util.addTagSafely(t,n)}else t.id="";t.innerHTML=p(t,d,s,o,a,e,l,u)}catch(e){return!1}return!0}var i,n,m,v=t();return v||(setTimeout(function(){!function e(t,i,n,a){a<=n||t()||(n++,setTimeout(function(){e(t,i,n,a)},i))}(t,500,0,10)},500),i=window,n="message",m=function(e){var t,i,n;c||"string"==typeof e.data&&(t=e.data.match(/^zMoatPlaceholder#([0-9]+)x([0-9]+)$/))&&(i=t[1],n=t[2],i==s&&n==o&&(c=function(e){try{var t=p(null,d,s,o,a,r,l,u);e.postMessage("zMoatAdContent#"+t,"*")}catch(e){return!1}return!0}(e.source)))},i.addEventListener?i.addEventListener(n,m,!1):i.attachEvent("on"+n,m)),v},e},a=function(){var n=0,a=f.floor(f.random()*f.pow(10,8));T.Queue.subscribe("vpaid-events",function(e){var t={e:32};t.q=n++,t.g=n,t.d=encodeURIComponent(T.qs.pcode+":"+e.type+":unknown:unknown"),t.i="VPAID2JSWRAPPER1",t.t=T.startTime,t.m=(new d).getTime()-T.startTime,t.ar=encodeURIComponent("62c9e24-clean"),t.de=a;var i="//pixel.moatads.com/pixel.gif?"+T.Util.objectToQueryString(t,!1)+"&bq=8&o=3&ac=1&cs=0";(new Image).src=i})},r=function(){T.Queue.subscribe("vpaid-events",function(e){var t=e.type,i=e.args;if(T.playerProvidedEventCallbacks[t])for(var n=T.playerProvidedEventCallbacks[t],a=n.length-1;0<=a;a--){var r=n[a],s=r.fn,o=r.listenerScope;o||(o=null);try{s.apply(o,i)}catch(e){}}})},s=function(){var e=function(e,t){(T.moatTag=this).pcode=e,this.ids=t,this.moatapi,this.eventBuffer=[],this.init()};return e.prototype.init=function(){var a=this;T.Queue.subscribe("moat-tag",function(e){a.initMoatTracking(e.videoElement,e.duration)}),T.Queue.subscribe("vpaid-events",function(e){var t={type:e.type,adVolume:T.ad.getAdVolume()};if(e.type===T.VPAIDevents.AdDurationChange&&(t.duration=e.args[0],t.confirmed=!0),"moat_DURATION_DEBUG"===e.type){if(!e.args||e.length<2)return;t[e.args[0]]=e.args[1]}if(a.moatapi&&"function"==typeof a.moatapi.dispatchEvent){if(a.eventBuffer&&0<a.eventBuffer.length)for(var i=a.eventBuffer.length-1;0<=i;i--){var n=a.eventBuffer[i];a.moatapi.dispatchEvent(n)}a.eventBuffer=!1,a.moatapi.dispatchEvent(t)}else a.eventBuffer&&a.eventBuffer.push(t)}),T.Queue.subscribe("moatapi-events",function(e){a.moatapi&&a.moatapi.adData&&a.moatapi.adData.ids&&!a.moatapi.adData.ids[e.property]?a.moatapi.adData.ids[e.property]=e.value:a.ids&&!a.ids[e.property]&&(a.ids[e.property]=e.value)}),T.Queue.subscribe("moatvideo-events",function(e){e.type&&"AdClicked"===e.type&&T.underlyingAsset&&T.underlyingAsset.onAdClickHandler&&T.underlyingAsset.onAdClickHandler()})},e.prototype.initMoatTracking=function(e,t){var i=document.createElement("script"),n=[],a={adData:{ids:this.ids,duration:t},dispatchEvent:function(e){this.sendEvent?(n&&(n.push(e),e=n,n=!1),this.sendEvent(e)):n&&n.push(e)},publishToWrapper:function(e){T.Queue.publish("moatvideo-events",e)}},r="_moatApi"+f.floor(1e8*f.random()),s=T.Util.getDocAndWinOfEl(e),o=(s.elDoc,s.elWin);if(!o)return!1;this.moatapi=o[r]=a,i.type="text/javascript",e&&e.insertBefore(i,e.childNodes[0]||null);var d="#"+r;i.src="https://z.moatads.com/"+this.pcode+"/moatvideo.js"+d},e},o=function(){var e=function(){this._width,this._height,this._viewMode,this._desiredBitrate,this._creativeData,this._environmentVars,this._slot,this._videoSlot,this._domElToTrack};return e.prototype={initAd:T.Util.makeSafe(function(e,t,i,n,a,r){this._width=e,this._height=t,this._viewMode=i||"normal",this._desiredBitrate=n,this._creativeData=a,this._environmentVars=r,this._slot=r.slot,this._videoSlot=r.videoSlot,"string"==typeof this._videoSlot.nodeName&&"number"==typeof this._videoSlot.nodeType?this._domElToTrack=this._videoSlot:this._domElToTrack=this._slot,T&&T.moatTag&&T.moatTag.ids&&this._domElToTrack&&(t="number"==typeof this._domElToTrack.offsetHeight?this._domElToTrack.offsetHeight:"-",e="number"==typeof this._domElToTrack.offsetWidth?this._domElToTrack.offsetHeight:"-",T.moatTag.ids.origSize=e+"x"+t);if(this._domElToTrack&&this._domElToTrack.parentNode&&this._domElToTrack.parentNode.id&&"fw-pdk-plugin-video-display-base"==this._domElToTrack.parentNode.id){var s=this._domElToTrack.offsetHeight,o=this._domElToTrack.offsetWidth;("number"==typeof s&&!isNaN(s)&&0==s||"number"==typeof o&&!isNaN(o)&&0==o)&&this._height&&this._width&&this._domElToTrack.style&&(this._domElToTrack.style.height=this._height+"px",this._domElToTrack.style.width=this._width+"px")}T.qs.vast,T.qs.asset;if(T.qs.vast)T.VastLoader=u(),(new T.VastLoader).request(T.qs.vast);else if(T.qs.asset){T.VideoPlayer=S();var d=new T.VideoPlayer;T.underlyingAsset=d;var l=[{fileURL:T.qs.asset,mimeType:"video/mp4",height:this._height,width:this._width,bitrate:this._desiredBitrate}];d.init(l,!1,T.qs.clickTag,!1)}else T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["AdError"]})},!0),collapseAd:T.Util.makeSafe(function(){T.underlyingAsset&&T.underlyingAsset.collapseAd()},!0),constructor:T.Util.makeSafe(constructor,!0),expandAd:T.Util.makeSafe(function(){T.underlyingAsset&&T.underlyingAsset.expandAd()},!0),getAdCompanions:T.Util.makeSafe(function(){if(T.underlyingAsset)return T.underlyingAsset.getAdCompanions()},!0),getAdDuration:T.Util.makeSafe(function(){return T.underlyingAsset?T.underlyingAsset.getAdDuration():-2},!0),getAdExpanded:T.Util.makeSafe(function(){if(T.underlyingAsset)return T.underlyingAsset.getAdExpanded()},!0),getAdHeight:T.Util.makeSafe(function(){if(T.underlyingAsset)return T.underlyingAsset.getAdHeight()},!0),getAdIcons:T.Util.makeSafe(function(){if(T.underlyingAsset)return T.underlyingAsset.getAdIcons()},!0),getAdLinear:T.Util.makeSafe(function(){if(T.underlyingAsset)return T.underlyingAsset.getAdLinear()},!0),getAdRemainingTime:T.Util.makeSafe(function(){return T.underlyingAsset?T.underlyingAsset.getAdRemainingTime():-2},!0),getAdSkippableState:T.Util.makeSafe(function(){if(T.underlyingAsset)return T.underlyingAsset.getAdSkippableState()},!0),getAdVolume:T.Util.makeSafe(function(){return T.underlyingAsset?T.underlyingAsset.getAdVolume():1},!0),getAdWidth:T.Util.makeSafe(function(){if(T.underlyingAsset)return T.underlyingAsset.getAdWidth()},!0),handshakeVersion:T.Util.makeSafe(function(e){return T.version},!0),pauseAd:T.Util.makeSafe(function(){T.underlyingAsset&&T.underlyingAsset.pauseAd()},!0),resizeAd:T.Util.makeSafe(function(e,t,i){T.underlyingAsset&&T.underlyingAsset.resizeAd(e,t,i)},!0),resumeAd:T.Util.makeSafe(function(){T.underlyingAsset&&T.underlyingAsset.resumeAd()},!0),setAdVolume:T.Util.makeSafe(function(e){!1===isNaN(e)&0<=e&&e<=1&&T.underlyingAsset&&T.underlyingAsset.setAdVolume(e)},!0),skipAd:T.Util.makeSafe(function(){T.underlyingAsset&&T.underlyingAsset.skipAd()},!0),startAd:T.Util.makeSafe(function(){T.underlyingAsset&&T.underlyingAsset.startAd()},!0),stopAd:T.Util.makeSafe(function(){T.underlyingAsset&&T.underlyingAsset.stopAd()},!0),subscribe:T.Util.makeSafe(function(e,t,i){var n=T.playerProvidedEventCallbacks;n[t]?n[t].push({fn:e,listenerScope:i}):n[t]=[{fn:e,listenerScope:i}]},!0),unsubscribe:T.Util.makeSafe(function(e,t){var i=T.playerProvidedEventCallbacks[t];if(i)for(var n=i.length-1;0<=n;n--)e===i[n].fn&&i.splice(n,1)},!0)},e},l=function(){var r={"vpaid-events":[],"moat-tag":[],"internal-events":[],"skip-button":[],"moatapi-events":[],"moatvideo-events":[],"wrapper-to-moatvideo-events":[]};return{subscribe:function(e,t){if(r[e]){var i=r[e].push(t)-1;return{remove:function(){delete r[e][i]}}}},publish:function(e,t){if(r[e])for(var i=r[e],n=i.length-1;0<=n;n--){var a=i[n];"function"==typeof a&&a.call(null,t)}}}},E=function(){var p={AdSkipped:"skip",AdStarted:"creativeView",AdVideoStart:"start",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdVideoComplete:"complete",AdUserAcceptInvitation:"acceptInvitation",AdUserMinimize:"collapse",AdUserClose:"close",AdPaused:"pause",AdPlaying:"resume",AdError:"error",AdProgress:"progress"};function c(e,t){return t&&e&&e[t]?e[t]:[]}return(E=function(e,t,i,n,a,r){this.trackingEvents=e,this.impressionURLs=t,this.scrURLS=T.Util.getScrUrls(),this.errorURLs=i,this.clicktrackingURLs=n,this.customTrackingEvents=r,this.lastVolume=!1,this.surveys=a,this.init()}).prototype.init=function(){var u=this;T.Queue.subscribe("internal-events",function(e){u.lastVolume=e.volume}),T.Queue.subscribe("vpaid-events",function(e){var t,i,n=!1;switch(e.type){case T.VPAIDevents.AdImpression:u.handleSurveys(),t=u.impressionURLs,n=!0;break;case T.VPAIDevents.AdVolumeChange:var a,r=T.underlyingAsset&&T.underlyingAsset.getAdVolume();"number"==typeof u.lastVolume&&"number"==typeof r&&(0===r&&0<u.lastVolume?a="mute":0<r&&0===u.lastVolume&&(a="unmute")),u.lastVolume=r,a&&(t=u.trackingEvents[a]);break;case T.VPAIDevents.AdClickThru:t=u.clicktrackingURLs;break;case T.VPAIDevents.AdError:t=u.errorURLs;break;default:var s=p[e.type];t=c(u.trackingEvents,s).concat(c(u.customTrackingEvents,s));break}if(t)for(var o=t.length-1;0<=o;o--)if("string"==typeof(i=t[o]))try{(new Image).src=i}catch(e){}if(n)for(var d=u.scrURLS,l=d.length-1;0<=l;l--)T.Util.addScriptToDOM(d[l],T.ad._domElToTrack)})},E.prototype.handleSurveys=function(){if(this.surveys&&T.ad._domElToTrack)for(var e,t,i,n=T.ad._domElToTrack,a=this.surveys,r=!1,s=0;s<a.length;s++)if("js"===u(i=a[s])){if(!r){var o=T.Util.getDocAndWinOfEl(n);e=o.elDoc,t=o.elWin,r=!0}if(!t)continue;var d=e.createElement("script");d.src=i.url,d.type="text/javascript";var l=T.Util.getParentNode(n)||n;l.insertBefore(d,l.childNodes[0]||null)}else(new Image).src=i.url;function u(e){var t="";if(e.type){var i=e.type.split("/");t="javascript"===i[i.length-1]?"js":"pixel"}else{var n=e.url.match(/([^/&?#]+)(?:$|#|\?)/i),a=n&&2===n.length&&n[1],r=a&&a.split(".");t=r&&r[r.length-1]}return"js"===t?"js":"pixel"}},E},u=function(){var e=function(){};return e.prototype.request=function(e){var t=this,i=!1;e&&e.match("ad.doubleclick.net")&&(i=!0),DMVAST.client.get(e,{withCredentials:i},function(e){e?t.extractStuff(e):T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["no VAST tag response"]})})},e.prototype.extractStuff=function(e){var t=["progressive"];if(e&&e.ads&&0!==e.ads.length){var i={linearCreatives:[],companions:[]},n=e.ads[0];n.creativeId&&T.Queue.publish("moatapi-events",{property:"zMoatCreativeId",value:n.creativeId});for(var a=n.creatives,r=a.length-1;0<=r;r--){var s=a[r];switch(s.type){case"linear":for(var o={duration:s.duration,adParameters:s.adParameters,trackingEvents:s.trackingEvents,clickthroughURL:s.videoClickThroughURLTemplate,clicktrackingURLs:s.videoClickTrackingURLTemplates,vpaid:[],videos:[],skipoffset:s.skipDelay},d=s.mediaFiles,l=d.length-1;0<=l;l--){var u=d[l],p=u.mimeType.toLowerCase(),c=u.deliveryType.toLowerCase();"VPAID"===u.apiFramework&&("application/javascript"===p||"application/x-javascript"===p)&&-1<t.indexOf(c)&&o.vpaid.push(u),-1<t.indexOf(c)&&o.videos.push(u)}i.linearCreatives.push(o);break;case"companion":for(var h=s.variations.length-1;0<=h;h--)i.companions.push(s.variations[h])}}var m,v=i.linearCreatives.length;if(1===v)m=i.linearCreatives[0];else for(r=v-1;0<=r;r--){var f=i.linearCreatives[r];if(0<f.videos.length||0<f.vpaid.length){m=f;break}}if(m||T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["No suitable assets found"]}),m.customTrackingEvents=function(e){var t=e.extensions,r={};function s(e){if(void 0!==e.children&&0!==e.children.length)for(var t=e.children,i=0;i<t.length;i++){if("Tracking"===t[i].name){var n=t[i].attributes.event,a=t[i].value;r[n]=[a]}s(t[i])}}for(var i in t)s(t[i]);return r}(n),T.TrackerManager=E(),new T.TrackerManager(m.trackingEvents,n.impressionURLTemplates,n.errorURLTemplates,m.clicktrackingURLs,n.surveys,m.customTrackingEvents),0<i.companions.length){T.CompanionLoader=b();for(var g=new T.CompanionLoader,A=i.companions.length-1;0<=A;A--){var y,_,k=i.companions[A];k.htmlResource?(y="HTMLResource",_=k.htmlResource):k.iframeResource?(y="IFrameResource",_=k.iframeResource):k.staticResource&&(y="StaticResource",_=k.staticResource),g.loadCompanion(y,k.type,k.width,k.height,_,!1,k.companionClickThroughURLTemplate,k.trackingEvents.creativeView)}}if(0<m.vpaid.length)return T.VpaidPlayer=V(),void(C=new T.VpaidPlayer).init(m.vpaid[0],m.adParameters,m.duration,i.companions);if(0<m.videos.length){T.Queue.publish("vpaid-events",{type:"moat_DURATION_DEBUG",args:["mediafile","video"]}),T.Queue.publish("vpaid-events",{type:"moat_DURATION_DEBUG",args:["vast-duration",m.duration]}),T.VideoPlayer=S();var C=new T.VideoPlayer;(T.underlyingAsset=C).init(m.videos,m.duration,m.clickthroughURL,i.companions,m.skipoffset)}else T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["No suitable assets found"]})}},e},S=function(){var e=function(){var e;this._videoEl,this._adIsStarted,this._firstQuartileTime,this._firstQuartileReached,this._midpointTime,this._midpointReached,this._thirdQuartileTime,this._thirdQuartileReached,this._videoIsCompleted,this._adIsPlaying=!1,this._lastViewMode,this._originalSlotCursorStyle,this._originalVideoSlotCursorStyle,this._pauseAdOnClickThru=!0,this._adIsPausedViaClickThru=!1,this._clickthroughURL,this._lastClickThruTime,this._skipoffset,this._cleanupCalled,this._durationConfirmed=!1,this._adLinear=!0,this._adWidth=T.ad._width,this._adHeight=T.ad._height,this._adExpanded=!1,this._adSkippableState=!1,this._adRemainingTime=-2,this._adDuration=-2,this._adVolume=1,this._adCompanions="",this._adIcons=!1,this._skipButtonModule=((e=function(e){this.skipContainer,this.textContainer,this.iconContainer,this.skipIconUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAAKBJREFUOBFjYBgFsBD4////TCBmg/Hx0UB1FUD8CYi7cKoDSoLAMSCWxKkIKgFU8xSkGAh+4VQLkQeTz4CkJU6FQAmg/CuYepzqYAqg9E8gnYZLMVCOZANh5mMNV0oMBBmMEa6UGggyFCVckQ1kwhUuVBcHOQMHoKqXqRYpVE02KBGALWyBQUN0OsQILxwGEpX1sIYXDgNhhUM3NvlhLgYAYuCVi7Jf+AUAAAAASUVORK5CYII=",this.init(e)}).prototype.init=function(e){this.createContainer(e),this.createTextContainer(),this.createIconContainer(),e.appendChild(this.skipContainer),this.updateButtonTextSubscription=T.Queue.subscribe("skip-button",this.updateButtonText.bind(this)),T.Queue.subscribe("vpaid-events",this.addClickHandler.bind(this))},e.prototype.createContainer=function(e){this.skipContainer=document.createElement("div"),this.skipContainer.style.background="rgba(0,0,0,0.8)",this.skipContainer.style.color="#ffffff",this.skipContainer.style.fontSize="11px",this.skipContainer.style.fontFamily="arial,sans-serif",this.skipContainer.style.position="absolute",this.skipContainer.style.textAlign="center",this.skipContainer.style.right="0px",this.skipContainer.style.bottom="10%",this.skipContainer.style.padding="2%"},e.prototype.createTextContainer=function(){this.textContainer=document.createElement("span"),this.textContainer.style.verticalAlign="middle",this.skipContainer.appendChild(this.textContainer)},e.prototype.createIconContainer=function(){this.iconContainer=document.createElement("img"),this.iconContainer.style.display="none",this.iconContainer.style.verticalAlign="middle",this.iconContainer.setAttribute("src",this.skipIconUrl),this.skipContainer.appendChild(this.iconContainer)},e.prototype.updateButtonText=function(e){0<e.timeLeft?this.textContainer.innerHTML="you can skip this ad in "+e.timeLeft:(this.textContainer.innerHTML="Skip Ad",this.textContainer.style.fontSize="18px",this.iconContainer.style.display="inline",this.updateButtonTextSubscription.remove())},e.prototype.skipAd=function(){T.underlyingAsset&&T.underlyingAsset.skipAd()},e.prototype.addClickHandler=function(e){e.type===T.VPAIDevents.AdSkippableStateChange&&T.Util.addListener(this.skipContainer,"click",this.skipAd,"skipClickHandlerFn")},e.prototype.cleanUp=function(){this.skipContainer.parentNode.removeChild(this.skipContainer),this.skipContainer=null,this.textContainer=null,this.iconContainer=null},e),this._skipButtonManager};return e.prototype.init=function(e,t,i,n,a){this._videoEl=T.ad._videoSlot,this._adDuration=this._adRemainingTime=t,this._mediaFile=this.pickMediaFile(e),this._skipoffset=a,this._skipoffset||(!1===isNaN(Number(T.qs.skip))?this._skipoffset=Number(T.qs.skip):!1===isNaN(Number(T.qs.zMoatSkip))&&(this._skipoffset=Number(T.qs.zMoatSkip)));var r=T&&T.ad&&T.ad._slot,s=T&&T.ad&&T.ad._videoSlot;r&&r.style&&(this._originalSlotCursorStyle=r.style.cursor,r.style.cursor="pointer"),s&&s.style&&(this._originalVideoSlotCursorStyle=s.style.cursor,s.style.cursor="pointer"),void 0!==this._videoEl.volume&&"number"==typeof this._videoEl.volume&&(this._adVolume=this._videoEl.volume),T.Queue.publish("internal-events",{volume:this._adVolume}),this._clickthroughURL=i,this._lastViewMode=T.ad._viewMode,this._adCompanions=T.Util.createXMLcompanionNode(n),this.onAdClickHandler=this.onAdClick(),this.onErrorHandler=this.videoErrorHandlerFn(),this.createListeners(),"1"===T.qs.noctp&&(this._pauseAdOnClickThru=!1),T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdLoaded}),this._adDuration&&(this.determineQuartiles(),T.Queue.publish("moat-tag",{videoElement:T.ad._domElToTrack,duration:this._adDuration}))},e.prototype.resizeAd=function(e,t,i,n){"string"==typeof i&&(i=i.toLowerCase());var a=i&&"fullscreen"===i,r="number"==typeof e&&"number"==typeof t&&!isNaN(e)&&!isNaN(t),s=!a&&!!r;!a&&!r||s&&!this._videoEl||(s&&(this._adHeight=t,this._adWidth=e,this._videoEl.width=e,this._videoEl.height=t),n&&T.ad._slot&&(T.ad._slot.style.width=e+"px",T.ad._slot.style.height=t+"px"),T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdSizeChange}))},e.prototype.startAd=function(){if(!this._adIsStarted){if(this.setVideoElSrc(this._mediaFile),T.ad&&T.ad._slot){var e="function"==typeof window.getComputedStyle&&window.getComputedStyle(T.ad._slot)||T.ad._slot.style||T.ad._slot.currentStyle;e&&T.ad._width&&T.ad._height&&("0px"==e.width&&0<T.ad._width||"0px"==e.height&&0<T.ad._height)&&this.resizeAd(T.ad._width,T.ad._height,T.ad._viewMode||"normal",!0)}"number"==typeof this._skipoffset&&(this._skipButtonManager=new this._skipButtonModule(T.ad._slot)),this._videoEl.load(),this._videoEl.play(),this._adIsStarted=!0,this._adIsPlaying=!0,this._adTimeFrequency=0,this._adIsPausedViaClickThru=!1,this.timer(),T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdStarted}),T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdImpression}),T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdVideoStart})}},e.prototype.stopAd=function(){this.cleanUp(),T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdStopped})},e.prototype.pauseAd=function(){1==this._adIsPlaying&&(this._videoEl.pause(),this._adIsPlaying=!1,T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdPaused}))},e.prototype.resumeAd=function(){0==this._adIsPlaying&&(this._videoEl.play(),this._adIsPlaying=!0,this._adIsPausedViaClickThru=!1,T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdPlaying}))},e.prototype.skipAd=function(){this.cleanUp(),T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdSkipped});T.Util.setSafeTimeout(function(){T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdStopped})},400)},e.prototype.getAdLinear=function(){return this._adLinear},e.prototype.getAdCompanions=function(){return this._adCompanions},e.prototype.getAdExpanded=function(){return this._adExpanded},e.prototype.getAdHeight=function(){return this._adHeight},e.prototype.getAdWidth=function(){return this._adWidth},e.prototype.getAdVolume=function(){var e=1,t=this._videoEl.volume,i=this._adVolume;return this._videoEl.muted?e=0:"number"!=typeof t||isNaN(t)?"number"!=typeof i||isNaN(i)||(e=i):e=t,e},e.prototype.setAdVolume=function(e){this._adVolume=e,"number"==typeof this._videoEl.volume&&(this._videoEl.volume=e),T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdVolumeChange})},e.prototype.getAdRemainingTime=function(){return this._adDuration-this._videoEl.currentTime},e.prototype.getAdDuration=function(){return this._adDuration},e.prototype.getAdIcons=function(){return this._adIcons},e.prototype.getAdSkippableState=function(){return this._adSkippableState},e.prototype.setVideoElSrc=function(e){e&&"string"==typeof e.fileURL&&e.fileURL.length?this._videoEl.src=e.fileURL:T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["invalid mediaFile or mediaFile fileURL"]})},e.prototype.pickMediaFile=function(e){for(var t=this._adWidth*this._adHeight,i=[],n=e.length-1;0<=n;n--){var a=e[n];""!==this._videoEl.canPlayType(a.mimeType)&&i.push({sizeDiff:f.abs(t-a.width*a.height),bitrate:a.bitrate,mediaFile:a})}0===i.length&&T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["AdError"]}),i.sort(function(e,t){var i=e.sizeDiff-t.sizeDiff;return 0!==i?i:t.bitrate-e.bitrate});for(n=i.length-1;0<=n;n--){var r=i[n];if("probably"===this._videoEl.canPlayType(r.mediaFile.mimeType))return r.mediaFile}for(n=i.length-1;0<=n;n--){r=i[n];if("maybe"===this._videoEl.canPlayType(r.mediaFile.mimeType))return r.mediaFile}},e.prototype.onAdClick=function(){return function(e){var t=(new d).getTime();if(void 0===this._lastClickThruTime||100<t-this._lastClickThruTime){if(this._lastClickThruTime=t,!0===this._pauseAdOnClickThru&&!1===this._adIsPausedViaClickThru)this.pauseAd(),this._adIsPausedViaClickThru=!0;else if(!0===this._adIsPausedViaClickThru)return void this.resumeAd();T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdClickThru,args:[this._clickthroughURL,null,!0]})}}.bind(this)},e.prototype.videoErrorHandlerFn=function(e){return function(e){T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["AdError"]})}},e.prototype.createListeners=function(){T.Util.addListener(T.ad._slot,"click",this.onAdClickHandler,"slotClickHandlerFn"),T.Util.addListener(T.ad._videoSlot,"click",this.onAdClickHandler,"videoSlotClickHandlerFn"),T.Util.addListener(this._videoEl,"error",this.onErrorHandler,"videoErrorHandlerFn")},e.prototype.determineQuartiles=function(){var e=this._adDuration/4;this._firstQuartileTime=0+e,this._midpointTime=this._firstQuartileTime+e,this._thirdQuartileTime=this._midpointTime+e},e.prototype.onConfirmDuration=function(e){if(!this._adDuration&&0!==this._adDuration){if(!T.ad._domElToTrack)return T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["AdError"]}),!1;T.Queue.publish("moat-tag",{videoElement:T.ad._domElToTrack,duration:self._adDuration})}this._adDuration=e,this.determineQuartiles(),this._durationConfirmed=!0,T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdDurationChange,args:[e]})},e.prototype.confirmDuration=function(){if(!this._durationConfirmed){var e=this._videoEl&&this._videoEl.duration;"number"==typeof e&&!isNaN(e)&&0<e&&this.onConfirmDuration(f.round(e))}},e.prototype.timer=function(){var e,t=(e=this,function(){e.confirmDuration(),e._adDuration&&e.progressWatcher()});T.Util.setSafeLoop(t,[],500)},e.prototype.progressWatcher=function(){if(this._skipoffset&&!1===this._adSkippableState&&this._videoEl.currentTime>this._skipoffset&&(this._adSkippableState=!0,T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdSkippableStateChange})),T.Queue.publish("skip-button",{timeLeft:f.max(f.round(this._skipoffset-this._videoEl.currentTime),0)}),this._adIsStarted&&!this._firstQuartileReached&&this._videoEl.currentTime>this._firstQuartileTime)this._firstQuartileReached=!0,T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdVideoFirstQuartile});else if(this._adIsStarted&&this._firstQuartileReached&&!this._midpointReached&&this._videoEl.currentTime>this._midpointTime)this._midpointReached=!0,T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdVideoMidpoint});else if(this._adIsStarted&&this._firstQuartileReached&&this._midpointReached&&!this._thirdQuartileReached&&this._videoEl.currentTime>this._thirdQuartileTime)this._thirdQuartileReached=!0,T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdVideoThirdQuartile});else if(this._adIsStarted&&this._firstQuartileReached&&this._midpointReached&&this._thirdQuartileReached&&!this._videoIsCompleted&&(this._videoEl.currentTime>=this._adDuration||this._videoEl.ended)){this.cleanUp(),this._videoIsCompleted=!0,T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdVideoComplete});T.Util.setSafeTimeout(function(){T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdStopped})},400)}},e.prototype.cleanUp=function(){this._cleanupCalled||(this._cleanupCalled=!0,T.Util.removeListener(T.ad._slot,"click",this.onAdClickHandler,"slotClickHandlerFn"),T.Util.removeListener(T.ad._videoSlot,"click",this.onAdClickHandler,"videoSlotClickHandlerFn"),T.Util.removeListener(this._videoEl,"error",this.onErrorHandler,"videoErrorHandlerFn"),T.ad._slot.style&&(T.ad._slot.style.cursor=this._originalSlotCursorStyle),T.ad._videoSlot.style&&(T.ad._videoSlot.style.cursor=this._originalVideoSlotCursorStyle),"number"==typeof this._skipoffset&&this._skipButtonManager.cleanUp())},e},V=function(){return(V=function(){this._iframe,this._adCompanions,this._lastAdVolume,this._adParameters}).prototype.init=function(e,t,i,n){var a=f.random()+"";if(window["moatstartvpaid"+a]=this.startVPAID.bind(this),window["moatstartvpaiderr"+a]=this.handleError.bind(this),e&&e.fileURL&&e.fileURL.match(/^https?:\/\/(s0\.2mdn\.net|imasdk\.googleapis\.com)/)){var r=document.createElement("script");r.type="text/javascript",r.onload=function(){window["moatstartvpaid"+a]()},r.onerror=function(){window["moatstartvpaiderr"+a]()},r.src=e.fileURL,T.Util.addTagSafely(r,document.body)}else{var s=document.createElement("iframe");(this._iframe=s).style.display="none",document.body.appendChild(s);var o='<html><head><body><script>function startVPAID() {window.parent["moatstartvpaid'+a+'"]();};function errVPAID() {window.parent["moatstartvpaiderr'+a+'"]();};<\/script><script onerror="errVPAID();" onload="startVPAID();" src="'+e.fileURL+'"><\/script></body></head></html>';s.contentWindow.moatsrc=o,s.src="javascript:window.moatsrc"}this._adCompanions=n,this._adParameters=t,T.Queue.publish("moat-tag",{videoElement:T.ad._domElToTrack,duration:i})},V.prototype.handleError=function(){T.Queue.publish("vpaid-events",{type:T.VPAIDevents.AdError,args:["no VPAID response"]})},V.prototype.wrapGetAdCompanions=function(){var e=this,t=this._vpaid.getAdCompanions;this._vpaid.getAdCompanions=function(){return 0<e._adCompanions.length?T.Util.createXMLcompanionNode(e._adCompanions):t?t.call(e._vpaid):""}},V.prototype.createCallbacks=function(){var e={};for(var i in T.VPAIDevents){var t=function(e){var t=i;return function(){T.Queue.publish("vpaid-events",{type:t,args:arguments})}}();e[i]=t}return e},V.prototype.startVPAID=function(){var r,s=this,o=!1,d=0;r=s._iframe?s._iframe.contentWindow:window;T.Util.setSafeLoop(function(){if(20<++d||o)return s.handleError(),!1;var e=r.getVPAIDAd&&"function"==typeof r.getVPAIDAd&&r.getVPAIDAd();if(e){s._vpaid=e,o=!0,e.handshakeVersion(T.version);var t=s.createCallbacks();for(var i in t)e.subscribe(t[i],i);s.wrapGetAdCompanions(),T.underlyingAsset=e;var n,a={AdParameters:s._adParameters};e.initAd(T.ad._width,T.ad._height,T.ad._viewMode,T.ad._desiredBitrate,a,T.ad._environmentVars);try{n=e.getAdVolume()}catch(e){n=-1}return T.Queue.publish("internal-events",{volume:n}),!1}},[],100)},V}}(Date,Math)}catch(e){try{var t=e.name+" in global t/c: "+e.message+", stack="+e.stack,i="//pixel.moatads.com/pixel.gif?e=24&d=data%3Adata%3Adata%3Adata&i="+encodeURIComponent("TURNVPAID1")+"&ac=1&k="+encodeURIComponent(t)+"&ar="+encodeURIComponent("62c9e24-clean")+"&j="+encodeURIComponent(document.referrer)+"&cs="+(new Date).getTime();(new Image).src=i}catch(e){}}}();


/**
* Copyright (c) 2013 Olivier Poitrey <rs@dailymotion.com>
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*/
 
!function(){try{!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.DMVAST=e()}}(function(){return function r(s,o,a){function l(i,e){if(!o[i]){if(!s[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(u)return u(i,!0);throw new Error("Cannot find module '"+i+"'")}var n=o[i]={exports:{}};s[i][0].call(n.exports,function(e){var t=s[i][1][e];return l(t||e)},n,n.exports,r,s,o,a)}return o[i].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)l(a[e]);return l}({1:[function(e,t,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,i,n,r,s,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(u(i=this._events[e]))return!1;if(a(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,r=new Array(n-1),s=1;s<n;s++)r[s-1]=arguments[s];i.apply(this,r)}else if(l(i)){for(n=arguments.length,r=new Array(n-1),s=1;s<n;s++)r[s-1]=arguments[s];for(n=(o=i.slice()).length,s=0;s<n;s++)o[s].apply(this,r)}return!0},n.prototype.on=n.prototype.addListener=function(e,t){var i;if(!a(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned)&&((i=u(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<i&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()));return this},n.prototype.once=function(e,t){if(!a(t))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var i,n,r,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(i=this._events[e]).length,n=-1,i===t||a(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(i)){for(s=r;0<s--;)if(i[s]===t||i[s].listener&&i[s].listener===t){n=s;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a(i=this._events[e]))this.removeListener(e,i);else for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){return e._events&&e._events[t]?a(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t,i){var n;n=function(){this.id=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[],this.extensions=[],this.surveys=[]},t.exports=n},{}],3:[function(e,t,o){var i,a,r;a=e("./parser"),r=e("./util"),i=function(){function e(){}var i,n;return e.cappingFreeLunch=0,e.cappingMinimumTimeInterval=0,e.options={withCredentials:!1,timeout:0},e.get=function(e,t,i){var n,r,s;if(r=+new Date,n=o.extend=function(e,t){var i,n;for(i in t)n=t[i],e[i]=n;return e},i||("function"==typeof t&&(i=t),s={}),s=n(this.options,t),this.totalCallsTimeout<r?(this.totalCalls=1,this.totalCallsTimeout=r+36e5):this.totalCalls++,this.cappingFreeLunch>=this.totalCalls)i(null);else{if(!(r-this.lastSuccessfullAd<this.cappingMinimumTimeInterval))return a.parse(e,s,function(e){return i(e)});i(null)}},n=r.storage,i=Object.defineProperty,["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(t){i(e,t,{get:function(){return n.getItem(t)},set:function(e){return n.setItem(t,e)},configurable:!1,enumerable:!0})}),null==e.totalCalls&&(e.totalCalls=0),null==e.totalCallsTimeout&&(e.totalCallsTimeout=0),e}(),t.exports=i},{"./parser":12,"./util":19}],4:[function(e,t,i){var n;n=function(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.companionClickThroughURLTemplate=null,this.trackingEvents={}},t.exports=n},{}],5:[function(e,t,i){var n,r,s,o,a={}.hasOwnProperty,l=function(e,t){for(var i in t)a.call(t,i)&&(e[i]=t[i]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};n=function(){this.trackingEvents={}},s=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=null,this.mediaFiles=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplates=[],this.videoCustomClickURLTemplates=[],this.adParameters=null,this.icons=[]}return l(t,n),t}(),o=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="nonlinear",this.variations=[],this.videoClickTrackingURLTemplates=[]}return l(t,n),t}(),r=function(e){function t(){this.type="companion",this.variations=[],this.videoClickTrackingURLTemplates=[]}return l(t,n),t}(),t.exports={VASTCreativeLinear:s,VASTCreativeNonLinear:o,VASTCreativeCompanion:r}},{}],6:[function(e,t,i){var n;n=function(){this.attributes={},this.children=[]},t.exports=n},{}],7:[function(e,t,i){var n;n=function(e,t){this.name=e,this.value=t,this.attributes={},this.children=[]},t.exports=n},{}],8:[function(e,t,i){var n;n=function(){this.program=null,this.height=0,this.width=0,this.xPosition=0,this.yPosition=0,this.apiFramework=null,this.offset=null,this.duration=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.iconClickThroughURLTemplate=null,this.iconClickTrackingURLTemplates=[],this.iconViewTrackingURLTemplate=null},t.exports=n},{}],9:[function(e,t,i){t.exports={client:e("./client"),tracker:e("./tracker"),parser:e("./parser"),util:e("./util")}},{"./client":3,"./parser":12,"./tracker":15,"./util":19}],10:[function(e,t,i){var n;n=function(){this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null},t.exports=n},{}],11:[function(e,t,i){var n;n=function(){this.id=null,this.width=0,this.height=0,this.minSuggestedDuration="00:00:00",this.apiFramework="static",this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.nonlinearClickThroughURLTemplate=null},t.exports=n},{}],12:[function(e,t,i){var r,s,v,a,l,E,_,oe,I,ae,le,B,n,m,g,o,T=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1};s=e("./urlhandler"),m=e("./response"),v=e("./ad"),a=e("./extension"),l=e("./extensionchild"),o=e("./util"),oe=e("./creative").VASTCreativeLinear,_=e("./creative").VASTCreativeCompanion,I=e("./creative").VASTCreativeNonLinear,le=e("./mediafile"),ae=e("./icon"),E=e("./companionad"),B=e("./nonlinear"),g=e("./survey"),r=e("events").EventEmitter,n=function(){var n;function e(){}return n=[],e.addURLTemplateFilter=function(e){"function"==typeof e&&n.push(e)},e.removeURLTemplateFilter=function(){return n.pop()},e.countURLTemplateFilters=function(){return n.length},e.clearUrlTemplateFilters=function(){return n=[]},e.parse=function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),this._parse(e,null,t,function(e,t){return i(t)})},e.vent=new r,e.track=function(e,t){return this.vent.emit("VAST-error",t),o.track(e,t)},e.on=function(e,t){return this.vent.on(e,t)},e.once=function(e,t){return this.vent.once(e,t)},e._parse=function(c,p,d,f){var e,t,i,x;for(f||("function"==typeof d&&(f=d),d={}),t=0,i=n.length;t<i;t++)e=n[t],c=e(c);return null==p&&(p=[]),p.push(c),s.get(c,d,(x=this,function(e,t){var r,L,i,n,R,s,o,a,l,u,h;if(null!=e)return f(e);if(R=new m,null==(null!=t?t.documentElement:void 0)||"VAST"!==t.documentElement.nodeName)return f();for(s=0,a=(u=t.documentElement.childNodes).length;s<a;s++)"Error"===(n=u[s]).nodeName&&R.errorURLTemplates.push(x.parseNodeText(n));for(o=0,l=(h=t.documentElement.childNodes).length;o<l;o++)"Ad"===(n=h[o]).nodeName&&(null!=(r=x.parseAdElement(n))?R.ads.push(r):x.track(R.errorURLTemplates,{ERRORCODE:101}));for(L=function(e){var t,i,n;if(null==e&&(e=!1),R){for(t=0,i=(n=R.ads).length;t<i;t++)if(null!=(r=n[t]).nextWrapperURL)return;return 0===R.ads.length&&(e||x.track(R.errorURLTemplates,{ERRORCODE:303}),R=null),f(null,R)}},i=R.ads.length;i--;)null!=(r=R.ads[i]).nextWrapperURL&&function(k){var e,t,i;10<=p.length||(i=k.nextWrapperURL,0<=T.call(p,i))?(x.track(k.errorURLTemplates,{ERRORCODE:302}),R.ads.splice(R.ads.indexOf(k),1),L()):(0===k.nextWrapperURL.indexOf("//")?(t=location.protocol,k.nextWrapperURL=""+t+k.nextWrapperURL):-1===k.nextWrapperURL.indexOf("://")&&(e=c.slice(0,c.lastIndexOf("/")),k.nextWrapperURL=e+"/"+k.nextWrapperURL),x._parse(k.nextWrapperURL,p,d,function(e,t){var i,n,r,s,o,a,l,u,h,c,p,d,f,m,v,g,T,y;if(n=!1,null!=e)x.track(k.errorURLTemplates,{ERRORCODE:301}),R.ads.splice(R.ads.indexOf(k),1),n=!0;else if(null==t)x.track(k.errorURLTemplates,{ERRORCODE:303}),R.ads.splice(R.ads.indexOf(k),1),n=!0;else for(R.errorURLTemplates=R.errorURLTemplates.concat(t.errorURLTemplates),s=R.ads.indexOf(k),R.ads.splice(s,1),l=0,u=(v=t.ads).length;l<u;l++){if((o=v[l]).errorURLTemplates=k.errorURLTemplates.concat(o.errorURLTemplates),o.impressionURLTemplates=k.impressionURLTemplates.concat(o.impressionURLTemplates),null!=k.trackingEvents)for(d=0,h=(g=o.creatives).length;d<h;d++)if("linear"===(i=g[d]).type||"nonlinear"===i.type)for(f=0,c=(T=Object.keys(k.trackingEvents)).length;f<c;f++)r=T[f],(a=i.trackingEvents)[r]||(a[r]=[]),i.trackingEvents[r]=i.trackingEvents[r].concat(k.trackingEvents[r]);if(null!=k.videoClickTrackingURLTemplates)for(m=0,p=(y=o.creatives).length;m<p;m++)"linear"!==(i=y[m]).type&&"nonlinear"!==i.type||(i.videoClickTrackingURLTemplates=i.videoClickTrackingURLTemplates.concat(k.videoClickTrackingURLTemplates));R.ads.splice(s,0,o)}return delete k.nextWrapperURL,L(n)}))}(r);return L()}))},e.childByName=function(e,t){var i,n,r,s;for(n=0,r=(s=e.childNodes).length;n<r;n++)if((i=s[n]).nodeName===t)return i},e.childsByName=function(e,t){var i,n,r,s,o;for(n=[],r=0,s=(o=e.childNodes).length;r<s;r++)(i=o[r]).nodeName===t&&n.push(i);return n},e.parseAdElement=function(e){var t,i,n,r,s;for(i=0,n=(r=e.childNodes).length;i<n;i++)if("Wrapper"===(s=(t=r[i]).nodeName)||"InLine"===s){if(t.setAttribute("id",e.getAttribute("id")),"Wrapper"===t.nodeName)return this.parseWrapperElement(t);if("InLine"===t.nodeName)return this.parseInLineElement(t)}},e.parseWrapperElement=function(e){var t,i,n,r,s,o,a;for(t=this.parseInLineElement(e),null!=(r=this.childByName(e,"VASTAdTagURI"))?t.nextWrapperURL=this.parseNodeText(r):null!=(r=this.childByName(e,"VASTAdTagURL"))&&(t.nextWrapperURL=this.parseNodeText(this.childByName(r,"URL"))),s=0,o=(a=t.creatives).length;s<o;s++)n=null,"linear"!==(i=a[s]).type&&"nonlinear"!==i.type||null!=(n=i)&&(null!=n.trackingEvents&&(t.trackingEvents=n.trackingEvents),null!=n.videoClickTrackingURLTemplates&&(t.videoClickTrackingURLTemplates=n.videoClickTrackingURLTemplates));if(null!=t.nextWrapperURL)return t},e.parseInLineElement=function(e){var t,i,n,r,s,o,a,l,u,h,c,p,d,f,m;for((t=new v).id=e.id,a=0,h=(d=e.childNodes).length;a<h;a++)switch((s=d[a]).nodeName){case"Error":t.errorURLTemplates.push(this.parseNodeText(s));break;case"Impression":t.impressionURLTemplates.push(this.parseNodeText(s));break;case"Survey":(o=new g).type=s.getAttribute("type"),o.url=this.parseNodeText(s),t.surveys.push(o);break;case"Creatives":for(l=0,c=(f=this.childsByName(s,"Creative")).length;l<c;l++)for(n=f[l],!t.creativeId&&n.id&&(t.creativeId=n.id),u=0,p=(m=n.childNodes).length;u<p;u++)switch((r=m[u]).nodeName){case"Linear":(i=this.parseCreativeLinearElement(r))&&t.creatives.push(i);break;case"NonLinearAds":(i=this.parseNonLinear(r))&&t.creatives.push(i);break;case"CompanionAds":(i=this.parseCompanionAd(r))&&t.creatives.push(i)}break;case"Extensions":this.parseExtension(t.extensions,this.childsByName(s,"Extension"))}return t},e.parseChildren=function(e,t){var i,n,r,s,o,a;for(a=[],r=0,s=(o=e.childNodes).length;r<s;r++)"#text"!==(i=o[r]).nodeName?((n=new l(i.nodeName,this.parseNodeText(i))).attributes=this.storeNodeAttributes(i),n?(t.children.push(n),null!=i.childNodes?a.push(this.parseChildren(i,n)):a.push(void 0)):a.push(void 0)):a.push(void 0);return a},e.parseExtension=function(e,t){var i,n,r,s,o;for(o=[],r=0,s=t.length;r<s;r++)i=t[r],(n=new a).attributes=this.storeNodeAttributes(i),this.parseChildren(i,n),o.push(e.push(n));return o},e.storeNodeAttributes=function(e){var t,i,n,r,s;if(i={},e.attributes)for(n=0,r=(s=e.attributes).length;n<r;n++)i[(t=s[n]).nodeName]=t.nodeValue;return i},e.parseCreativeLinearElement=function(e){var t,i,n,r,s,o,a,l,u,h,c,p,d,f,m,v,g,T,y,k,L,R,x,N,w,C,A,U,b,E,_,I,B,D,O,S,M,F,P,V,W,q,H,X,j,G,Q,Y,z,J,K,Z,$,ee,te,ie,ne,re,se;if((n=new oe).duration=this.parseDuration(this.parseNodeText(this.childByName(e,"Duration"))),-1===n.duration&&"Wrapper"!==e.parentNode.parentNode.parentNode.nodeName)return null;if(null==(k=e.getAttribute("skipoffset"))?n.skipDelay=null:"%"===k.charAt(k.length-1)?(T=parseInt(k,10),n.skipDelay=n.duration*(T/100)):n.skipDelay=this.parseDuration(k),null!=(w=this.childByName(e,"VideoClicks"))){for(n.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(w,"ClickThrough")),A=0,_=(Y=this.childsByName(w,"ClickTracking")).length;A<_;A++)i=Y[A],n.videoClickTrackingURLTemplates.push(this.parseNodeText(i));for(U=0,I=(z=this.childsByName(w,"CustomClick")).length;U<I;U++)r=z[U],n.videoCustomClickURLTemplates.push(this.parseNodeText(r))}for(null!=(t=this.childByName(e,"AdParameters"))&&(n.adParameters=this.parseNodeText(t)),b=0,D=(K=this.childsByName(e,"TrackingEvents")).length;b<D;b++)for(x=K[b],E=0,O=(Z=this.childsByName(x,"Tracking")).length;E<O;E++)if(s=(R=Z[E]).getAttribute("event"),N=this.parseNodeText(R),null!=s&&null!=N){if("progress"===s){if(!(g=R.getAttribute("offset")))continue;s="%"===g.charAt(g.length-1)?"progress-"+g:"progress-"+Math.round(this.parseDuration(g))}null==(C=n.trackingEvents)[s]&&(C[s]=[]),n.trackingEvents[s].push(N)}for(q=0,S=($=this.childsByName(e,"MediaFiles")).length;q<S;q++)for(v=$[q],H=0,M=(ee=this.childsByName(v,"MediaFile")).length;H<M;H++)m=ee[H],(f=new le).id=m.getAttribute("id"),f.fileURL=this.parseNodeText(m),f.deliveryType=m.getAttribute("delivery"),f.codec=m.getAttribute("codec"),f.mimeType=m.getAttribute("type"),f.apiFramework=m.getAttribute("apiFramework"),f.bitrate=parseInt(m.getAttribute("bitrate")||0),f.minBitrate=parseInt(m.getAttribute("minBitrate")||0),f.maxBitrate=parseInt(m.getAttribute("maxBitrate")||0),f.width=parseInt(m.getAttribute("width")||0),f.height=parseInt(m.getAttribute("height")||0),(y=m.getAttribute("scalable"))&&"string"==typeof y&&("true"===(y=y.toLowerCase())?f.scalable=!0:"false"===y&&(f.scalable=!1)),(d=m.getAttribute("maintainAspectRatio"))&&"string"==typeof d&&("true"===(d=d.toLowerCase())?f.maintainAspectRatio=!0:"false"===d&&(f.maintainAspectRatio=!1)),n.mediaFiles.push(f);if(null!=(c=this.childByName(e,"Icons")))for(X=0,F=(te=this.childsByName(c,"Icon")).length;X<F;X++){for(h=te[X],(a=new ae).program=h.getAttribute("program"),a.height=parseInt(h.getAttribute("height")||0),a.width=parseInt(h.getAttribute("width")||0),a.xPosition=this.parseXPosition(h.getAttribute("xPosition")),a.yPosition=this.parseYPosition(h.getAttribute("yPosition")),a.apiFramework=h.getAttribute("apiFramework"),a.offset=this.parseDuration(h.getAttribute("offset")),a.duration=this.parseDuration(h.getAttribute("duration")),j=0,P=(ie=this.childsByName(h,"HTMLResource")).length;j<P;j++)o=ie[j],a.type=o.getAttribute("creativeType")||"text/html",a.htmlResource=this.parseNodeText(o);for(G=0,V=(ne=this.childsByName(h,"IFrameResource")).length;G<V;G++)p=ne[G],a.type=p.getAttribute("creativeType")||0,a.iframeResource=this.parseNodeText(p);for(Q=0,W=(re=this.childsByName(h,"StaticResource")).length;Q<W;Q++)L=re[Q],a.type=L.getAttribute("creativeType")||0,a.staticResource=this.parseNodeText(L);if(null!=(u=this.childByName(h,"IconClicks")))for(a.iconClickThroughURLTemplate=this.parseNodeText(this.childByName(u,"IconClickThrough")),se=0,B=(J=this.childsByName(u,"IconClickTracking")).length;se<B;se++)l=J[se],a.iconClickTrackingURLTemplates.push(this.parseNodeText(l));a.iconViewTrackingURLTemplate=this.parseNodeText(this.childByName(h,"IconViewTracking")),n.icons.push(a)}return n},e.parseNonLinear=function(e){var t,i,n,r,s,o,a,l,u,h,c,p,d,f,m,v,g,T,y,k,L,R,x,N,w,C,A,U,b;for(t=new I,p=0,v=(N=this.childsByName(e,"TrackingEvents")).length;p<v;p++)for(u=N[p],d=0,g=(w=this.childsByName(u,"Tracking")).length;d<g;d++)i=(l=w[d]).getAttribute("event"),h=this.parseNodeText(l),null!=i&&null!=h&&(null==(c=t.trackingEvents)[i]&&(c[i]=[]),t.trackingEvents[i].push(h));for(f=0,T=(C=this.childsByName(e,"NonLinear")).length;f<T;f++){for(o=C[f],(s=new B).id=o.getAttribute("id")||null,s.width=o.getAttribute("width"),s.height=o.getAttribute("height"),s.minSuggestedDuration=o.getAttribute("minSuggestedDuration"),s.apiFramework=o.getAttribute("apiFramework"),m=0,y=(A=this.childsByName(o,"HTMLResource")).length;m<y;m++)n=A[m],s.type=n.getAttribute("creativeType")||"text/html",s.htmlResource=this.parseNodeText(n);for(R=0,k=(U=this.childsByName(o,"IFrameResource")).length;R<k;R++)r=U[R],s.type=r.getAttribute("creativeType")||0,s.iframeResource=this.parseNodeText(r);for(x=0,L=(b=this.childsByName(o,"StaticResource")).length;x<L;x++)a=b[x],s.type=a.getAttribute("creativeType")||0,s.staticResource=this.parseNodeText(a);s.nonlinearClickThroughURLTemplate=this.parseNodeText(this.childByName(o,"NonLinearClickThrough")),t.variations.push(s)}return t},e.parseCompanionAd=function(e){var t,i,n,r,s,o,a,l,u,h,c,p,d,f,m,v,g,T,y,k,L,R,x,N,w,C,A,U,b;for(n=new _,p=0,v=(N=this.childsByName(e,"Companion")).length;p<v;p++){for(i=N[p],(t=new E).id=i.getAttribute("id")||null,t.width=i.getAttribute("width"),t.height=i.getAttribute("height"),d=0,g=(w=this.childsByName(i,"HTMLResource")).length;d<g;d++)s=w[d],t.type=s.getAttribute("creativeType")||"text/html",t.htmlResource=this.parseNodeText(s);for(f=0,T=(C=this.childsByName(i,"IFrameResource")).length;f<T;f++)o=C[f],t.type=o.getAttribute("creativeType")||0,t.iframeResource=this.parseNodeText(o);for(m=0,y=(A=this.childsByName(i,"StaticResource")).length;m<y;m++)a=A[m],t.type=a.getAttribute("creativeType")||0,t.staticResource=this.parseNodeText(a);for(R=0,k=(U=this.childsByName(i,"TrackingEvents")).length;R<k;R++)for(u=U[R],x=0,L=(b=this.childsByName(u,"Tracking")).length;x<L;x++)r=(l=b[x]).getAttribute("event"),h=this.parseNodeText(l),null!=r&&null!=h&&(null==(c=t.trackingEvents)[r]&&(c[r]=[]),t.trackingEvents[r].push(h));t.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(i,"CompanionClickThrough")),t.companionClickTrackingURLTemplate=this.parseNodeText(this.childByName(i,"CompanionClickTracking")),n.variations.push(t)}return n},e.parseDuration=function(e){var t,i,n,r,s;return null==e?-1:3!==(t=e.split(":")).length?-1:(s=t[2].split("."),r=parseInt(s[0]),2===s.length&&(r+=parseFloat("0."+s[1])),n=parseInt(60*t[1]),i=parseInt(60*t[0]*60),isNaN(i||isNaN(n||isNaN(r||3600<n||60<r)))?-1:i+n+r)},e.parseXPosition=function(e){var t;return"left"===(t=e.toLowerCase())||"right"===t?e:parseInt(e||0)},e.parseYPosition=function(e){var t;return"top"===(t=e.toLowerCase())||"bottom"===t?e:parseInt(e||0)},e.parseNodeText=function(e){return e&&(e.textContent||e.text||"").trim()},e}(),t.exports=n},{"./ad":2,"./companionad":4,"./creative":5,"./extension":6,"./extensionchild":7,"./icon":8,"./mediafile":10,"./nonlinear":11,"./response":13,"./survey":14,"./urlhandler":16,"./util":19,events:1}],13:[function(e,t,i){var n;n=function(){this.ads=[],this.errorURLTemplates=[]},t.exports=n},{}],14:[function(e,t,i){var n;n=function(){this.type=null,this.url=null},t.exports=n},{}],15:[function(e,t,i){var n,s,o,r,a,l={}.hasOwnProperty;s=e("./client"),a=e("./util"),o=e("./creative").VASTCreativeLinear,n=e("events").EventEmitter,r=function(e){function t(e,t){var i,n,r;for(i in this.ad=e,this.creative=t,this.muted=!1,this.impressed=!1,this.skipable=!1,this.skipDelayDefault=-1,this.trackingEvents={},this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],r=this.creative.trackingEvents)n=r[i],this.trackingEvents[i]=n.slice(0);this.creative instanceof o?(this.setDuration(this.creative.duration),this.skipDelay=this.creative.skipDelay,this.linear=!0,this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1),this.on("start",function(){s.lastSuccessfullAd=+new Date})}return function(e,t){for(var i in t)l.call(t,i)&&(e[i]=t[i]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.setDuration=function(e){return this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}},t.prototype.setProgress=function(e){var t,i,n,r,s,o,a,l,u;if(-1===(s=null===this.skipDelay?this.skipDelayDefault:this.skipDelay)||this.skipable||(e<s?this.emit("skip-countdown",s-e):(this.skipable=!0,this.emit("skip-countdown",0))),this.linear&&0<this.assetDuration){if(i=[],0<e)for(r in i.push("start"),n=Math.round(e/this.assetDuration*100),i.push("progress-"+n+"%"),i.push("progress-"+Math.round(e)),u=this.quartiles)(o=u[r])<=e&&e<=o+1&&i.push(r);for(a=0,l=i.length;a<l;a++)t=i[a],this.track(t,!0);e<this.progress&&this.track("rewind")}return this.progress=e},t.prototype.setMuted=function(e){return this.muted!==e&&this.track(e?"mute":"unmute"),this.muted=e},t.prototype.setPaused=function(e){return this.paused!==e&&this.track(e?"pause":"resume"),this.paused=e},t.prototype.setFullscreen=function(e){return this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen"),this.fullscreen=e},t.prototype.setSkipDelay=function(e){if("number"==typeof e)return this.skipDelay=e},t.prototype.load=function(){if(!this.impressed)return this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView")},t.prototype.errorWithCode=function(e){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:e})},t.prototype.complete=function(){return this.track("complete")},t.prototype.close=function(){return this.track(this.linear?"closeLinear":"close")},t.prototype.stop=function(){},t.prototype.skip=function(){return this.track("skip"),this.trackingEvents=[]},t.prototype.click=function(){var e,t,i;if((null!=(i=this.clickTrackingURLTemplates)?i.length:void 0)&&this.trackURLs(this.clickTrackingURLTemplates),null!=this.clickThroughURLTemplate)return this.linear&&(t={CONTENTPLAYHEAD:this.progressFormated()}),e=a.resolveURLTemplates([this.clickThroughURLTemplate],t)[0],this.emit("clickthrough",e)},t.prototype.track=function(e,t){var i,n;null==t&&(t=!1),"closeLinear"===e&&null==this.trackingEvents[e]&&null!=this.trackingEvents.close&&(e="close"),n=this.trackingEvents[e],i=this.emitAlwaysEvents.indexOf(e),null!=n?(this.emit(e,""),this.trackURLs(n)):-1!==i&&this.emit(e,""),!0===t&&(delete this.trackingEvents[e],-1<i&&this.emitAlwaysEvents.splice(i,1))},t.prototype.trackURLs=function(e,t){return null==t&&(t={}),this.linear&&(t.CONTENTPLAYHEAD=this.progressFormated()),a.track(e,t)},t.prototype.progressFormated=function(){var e,t,i,n;return(e=(n=parseInt(this.progress))/3600).length<2&&(e="0"+e),(t=n/60%60).length<2&&(t="0"+t),(i=n%60).length<2&&(i="0"+t),e+":"+t+":"+i+"."+parseInt(100*(this.progress-n))},t}(),t.exports=r},{"./client":3,"./creative":5,"./util":19,events:1}],16:[function(r,e,t){var i,s,o;o=r("./urlhandlers/xmlhttprequest"),s=r("./urlhandlers/flash"),i=function(){function e(){}return e.get=function(e,t,i){var n;return i||("function"==typeof t&&(i=t),t={}),null!=t.response?i(null,t.response):(null!=(n=t.urlhandler)?n.supported():void 0)?t.urlhandler.get(e,t,i):"undefined"==typeof window||null===window?r("./urlhandlers/node").get(e,t,i):o.supported()?o.get(e,t,i):s.supported()?s.get(e,t,i):i()},e}(),e.exports=i},{"./urlhandlers/flash":17,"./urlhandlers/xmlhttprequest":18}],17:[function(e,t,i){var n;n=function(){function e(){}return e.xdr=function(){var e;return window.XDomainRequest&&(e=new XDomainRequest),e},e.supported=function(){return!!this.xdr()},e.get=function(e,t,i){var n,r;return(r="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)?(r.async=!1,(n=this.xdr()).open("GET",e),n.timeout=t.timeout||0,n.withCredentials=t.withCredentials||!1,n.send(),n.onprogress=function(){},n.onload=function(){return r.loadXML(n.responseText),i(null,r)}):i()},e}(),t.exports=n},{}],18:[function(e,t,i){var n;n=function(){function e(){}return e.xhr=function(){var e;if("withCredentials"in(e=new window.XMLHttpRequest))return e},e.supported=function(){return!!this.xhr()},e.get=function(e,t,i){var n;if("https:"===window.location.protocol&&0===e.indexOf("http://"))return i(new Error("Cannot go from HTTPS to HTTP."));try{return(n=this.xhr()).open("GET",e),n.timeout=t.timeout||0,n.withCredentials=t.withCredentials||!1,n.overrideMimeType&&n.overrideMimeType("text/xml"),n.onreadystatechange=function(){if(4===n.readyState)return i(null,n.responseXML)},n.send()}catch(e){return i()}},e}(),t.exports=n},{}],19:[function(e,t,i){var n;n=function(){function e(){}return e.track=function(e,t){var i,n,r,s,o,a;for(a=[],s=0,o=(n=this.resolveURLTemplates(e,t)).length;s<o;s++)i=n[s],"undefined"!=typeof window&&null!==window&&(r=new Image,a.push(r.src=i));return a},e.resolveURLTemplates=function(e,t){var i,n,r,s,o,a,l,u;i=[],null==t&&(t={}),"CACHEBUSTING"in t||(t.CACHEBUSTING=Math.round(1e10*Math.random())),t.random=t.CACHEBUSTING;for(l=0,u=e.length;l<u;l++)if(o=e[l]){for(n in t)a=t[n],r="["+n+"]",s="%%"+n+"%%",o=(o=o.replace(r,a)).replace(s,a);i.push(o)}return i},e.storage=function(){var i,t;try{t="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){e,t=null}return(null==t||function(e){var t;try{if(t="__VASTUtil__",e.setItem(t,t),e.getItem(t)!==t)return!0}catch(e){return e,!0}return!1}(t))&&(i={},t={length:0,getItem:function(e){return i[e]},setItem:function(e,t){i[e]=t,this.length=Object.keys(i).length},removeItem:function(e){delete i[e],this.length=Object.keys(i).length},clear:function(){i={},this.length=0}}),t}(),e}(),t.exports=n},{}]},{},[9])(9)})}catch(e){try{var t=e.name+" in global t/c: "+e.message+", stack="+e.stack,i="//pixel.moatads.com/pixel.gif?e=24&d=data%3Adata%3Adata%3Adata&i="+encodeURIComponent("TURNVPAID1")+"&ac=1&k="+encodeURIComponent(t)+"&ar="+encodeURIComponent("62c9e24-clean")+"&j="+encodeURIComponent(document.referrer)+"&cs="+(new Date).getTime();(new Image).src=i}catch(e){}}}();
